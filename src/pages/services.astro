---
import { getEntry } from 'astro:content';
import MainLayout from '../layouts/MainLayout.astro';
import PageHeader from '@/components/shared/PageHeader.astro';
import CTA from '@/components/shared/CTA.astro';
import ServicesGrid from '@/components/services/ServicesGrid.astro';
import PricingSection from '@/components/services/PricingSection.astro';

const page = await getEntry('pages', 'services');

if (!page) {
  throw new Error('Page not found');
}

const { Content } = await page.render();

const services = [
  {
    id: 'website-creation',
    title: 'Website Creation',
    description: 'Professional, responsive websites designed specifically for small businesses.',
    icon: 'laptop',
    features: [
      '5-7 pages with responsive design',
      'Hosting, domain, and maintenance included',
      'Regular updates and support',
      'Annual design refresh',
    ],
    pricing: {
      upfront: 799,
      recurring: 159,
      recurringPeriod: 'month',
    },
  },
  {
    id: 'google-ads',
    title: 'Google Search Ads Management',
    description:
      'Targeted search advertising to reach customers actively looking for your services.',
    icon: 'search',
    features: [
      'Keyword research and optimization',
      'Ad copy creation and testing',
      'Performance tracking and reporting',
      'Monthly strategy adjustments',
    ],
    pricing: {
      upfront: 99,
      recurring: 299,
      recurringPeriod: 'month',
    },
  },
  {
    id: 'social-media',
    title: 'Social Media Advertising',
    description: 'Engage with your audience where they spend their time online.',
    icon: 'share',
    features: [
      'Platform selection and strategy',
      'Creative development',
      'Audience targeting',
      'Performance optimization',
    ],
    pricing: {
      upfront: 99,
      recurring: 599,
      recurringPeriod: 'month',
    },
  },
];

// Extract all SEO properties from the content entry
const {
  title,
  description,
  canonicalUrl,
  ogImage,
  ogType,
  twitterCard,
  metaRobots,
  keywords,
  author,
  features,
  updatedDate,
  metadata,
} = page.data;
---

<MainLayout
  {title}
  {description}
  {canonicalUrl}
  {ogImage}
  {ogType}
  {twitterCard}
  {metaRobots}
  {keywords}
  {author}
>
  <PageHeader
    title="Our Services"
    description="Transparent, effective marketing services designed specifically for small businesses."
  />

  <ServicesGrid {services} />

  <PricingSection
    {services}
    serviceId="website-creation"
    features={[
      '5-7 responsive pages',
      'Hosting and domain included',
      'Regular maintenance and updates',
      'Content management system',
      'Mobile optimization',
      'Basic SEO setup',
      'Contact form integration',
      'Google Analytics setup',
      'Annual design refresh',
    ]}
  />

  <CTA
    title="Ready to get started?"
    description="Contact us today to discuss how our services can help your business grow."
    buttonText="Contact Us"
    buttonLink="/contact"
  />
</MainLayout>
